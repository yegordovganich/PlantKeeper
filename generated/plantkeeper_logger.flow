// Auto-generated by substantiate from sql/plantkeeper.sql
forbid plantkeeper/config;
import generated/plantkeeper_types;
import generated/plantkeeper_database;

export {
	logFamily(oldVal : [Family], newVal : Family) -> void;
	logColor(oldVal : [Color], newVal : Color) -> void;
	logLeafType(oldVal : [LeafType], newVal : LeafType) -> void;
	logCarePlan(oldVal : [CarePlan], newVal : CarePlan) -> void;
	logPlant(oldVal : [Plant], newVal : Plant) -> void;
}

logFamily(oldVal : [Family], newVal : Family) -> void {
	if (length(oldVal) == 0) {
		insertLog(Log(-1, timestamp() |> stamp2time, "families", newVal.id, "added", "Name: " + newVal.name + ", \nDescription: " + newVal.description, "Family", "-1", -1), nop1, println);
	} else {
		if (oldVal[0].name != newVal.name)
			insertLog(Log(-1, timestamp() |> stamp2time, "families", newVal.id, oldVal[0].name, newVal.name, "name", "-1", -1), nop1, println);
		if (oldVal[0].description != newVal.description)
			insertLog(Log(-1, timestamp() |> stamp2time, "families", newVal.id, oldVal[0].description, newVal.description, "description", "-1", -1), nop1, println);
	}
}

logColor(oldVal : [Color], newVal : Color) -> void {
	if (length(oldVal) == 0) {
		insertLog(Log(-1, timestamp() |> stamp2time, "colors", newVal.id, "added", "Color: " + (newVal.color |> i2s) + ", \nLeaf: " + (newVal.leaf |> b2s), "Color", "-1", -1), nop1, println);
	} else {
		if (oldVal[0].color != newVal.color)
			insertLog(Log(-1, timestamp() |> stamp2time, "colors", newVal.id, oldVal[0].color |> i2s, newVal.color |> i2s, "color", "-1", -1), nop1, println);
		if (oldVal[0].leaf != newVal.leaf)
			insertLog(Log(-1, timestamp() |> stamp2time, "colors", newVal.id, oldVal[0].leaf |> b2s, newVal.leaf |> b2s, "leaf", "-1", -1), nop1, println);
	}
}

logLeafType(oldVal : [LeafType], newVal : LeafType) -> void {
	if (length(oldVal) == 0) {
		insertLog(Log(-1, timestamp() |> stamp2time, "leaf_types", newVal.id, "added", "Name: " + newVal.name + ", \nDescription: " + newVal.description, "LeafType", "-1", -1), nop1, println);
	} else {
		if (oldVal[0].name != newVal.name)
			insertLog(Log(-1, timestamp() |> stamp2time, "leaf_types", newVal.id, oldVal[0].name, newVal.name, "name", "-1", -1), nop1, println);
		if (oldVal[0].description != newVal.description)
			insertLog(Log(-1, timestamp() |> stamp2time, "leaf_types", newVal.id, oldVal[0].description, newVal.description, "description", "-1", -1), nop1, println);
	}
}

logCarePlan(oldVal : [CarePlan], newVal : CarePlan) -> void {
	if (length(oldVal) == 0) {
		insertLog(Log(-1, timestamp() |> stamp2time, "care_plans", newVal.id, "added", "Name: " + newVal.name + ", \nDescription: " + newVal.description + ", \nPour: " + (newVal.pour |> d2s) + ", \nLight: " + (newVal.light |> b2s) + ", \nTurn: " + (newVal.turn |> d2s) + ", \nTempreture: " + (newVal.tempreture |> i2s) + ", \nSpray: " + (newVal.spray |> d2s) + ", \nWipe leaves: " + (newVal.wipeLeaves |> d2s), "CarePlan", "-1", -1), nop1, println);
	} else {
		if (oldVal[0].name != newVal.name)
			insertLog(Log(-1, timestamp() |> stamp2time, "care_plans", newVal.id, oldVal[0].name, newVal.name, "name", "-1", -1), nop1, println);
		if (oldVal[0].description != newVal.description)
			insertLog(Log(-1, timestamp() |> stamp2time, "care_plans", newVal.id, oldVal[0].description, newVal.description, "description", "-1", -1), nop1, println);
		if (oldVal[0].pour != newVal.pour)
			insertLog(Log(-1, timestamp() |> stamp2time, "care_plans", newVal.id, oldVal[0].pour |> d2s, newVal.pour |> d2s, "pour", "-1", -1), nop1, println);
		if (oldVal[0].light != newVal.light)
			insertLog(Log(-1, timestamp() |> stamp2time, "care_plans", newVal.id, oldVal[0].light |> b2s, newVal.light |> b2s, "light", "-1", -1), nop1, println);
		if (oldVal[0].turn != newVal.turn)
			insertLog(Log(-1, timestamp() |> stamp2time, "care_plans", newVal.id, oldVal[0].turn |> d2s, newVal.turn |> d2s, "turn", "-1", -1), nop1, println);
		if (oldVal[0].tempreture != newVal.tempreture)
			insertLog(Log(-1, timestamp() |> stamp2time, "care_plans", newVal.id, oldVal[0].tempreture |> i2s, newVal.tempreture |> i2s, "tempreture", "-1", -1), nop1, println);
		if (oldVal[0].spray != newVal.spray)
			insertLog(Log(-1, timestamp() |> stamp2time, "care_plans", newVal.id, oldVal[0].spray |> d2s, newVal.spray |> d2s, "spray", "-1", -1), nop1, println);
		if (oldVal[0].wipeLeaves != newVal.wipeLeaves)
			insertLog(Log(-1, timestamp() |> stamp2time, "care_plans", newVal.id, oldVal[0].wipeLeaves |> d2s, newVal.wipeLeaves |> d2s, "wipe_leaves", "-1", -1), nop1, println);
	}
}

logPlant(oldVal : [Plant], newVal : Plant) -> void {
	if (length(oldVal) == 0) {
		insertLog(Log(-1, timestamp() |> stamp2time, "plants", newVal.id, "added", "Name: " + newVal.name + ", \nFamily id: " + (newVal.familyId |> i2s) + ", \nLeaf color id: " + (newVal.leafColorId |> i2s) + ", \nBud color id: " + (newVal.budColorId |> i2s) + ", \nHeight: " + (newVal.height |> i2s) + ", \nLeaf type id: " + (newVal.leafTypeId |> i2s) + ", \nCare plan id: " + (newVal.carePlanId |> i2s), "Plant", "-1", -1), nop1, println);
	} else {
		if (oldVal[0].name != newVal.name)
			insertLog(Log(-1, timestamp() |> stamp2time, "plants", newVal.id, oldVal[0].name, newVal.name, "name", "-1", -1), nop1, println);
		if (oldVal[0].familyId != newVal.familyId)
			insertLog(Log(-1, timestamp() |> stamp2time, "plants", newVal.id, oldVal[0].familyId |> i2s, newVal.familyId |> i2s, "family_id", "-1", -1), nop1, println);
		if (oldVal[0].leafColorId != newVal.leafColorId)
			insertLog(Log(-1, timestamp() |> stamp2time, "plants", newVal.id, oldVal[0].leafColorId |> i2s, newVal.leafColorId |> i2s, "leaf_color_id", "-1", -1), nop1, println);
		if (oldVal[0].budColorId != newVal.budColorId)
			insertLog(Log(-1, timestamp() |> stamp2time, "plants", newVal.id, oldVal[0].budColorId |> i2s, newVal.budColorId |> i2s, "bud_color_id", "-1", -1), nop1, println);
		if (oldVal[0].height != newVal.height)
			insertLog(Log(-1, timestamp() |> stamp2time, "plants", newVal.id, oldVal[0].height |> i2s, newVal.height |> i2s, "height", "-1", -1), nop1, println);
		if (oldVal[0].leafTypeId != newVal.leafTypeId)
			insertLog(Log(-1, timestamp() |> stamp2time, "plants", newVal.id, oldVal[0].leafTypeId |> i2s, newVal.leafTypeId |> i2s, "leaf_type_id", "-1", -1), nop1, println);
		if (oldVal[0].carePlanId != newVal.carePlanId)
			insertLog(Log(-1, timestamp() |> stamp2time, "plants", newVal.id, oldVal[0].carePlanId |> i2s, newVal.carePlanId |> i2s, "care_plan_id", "-1", -1), nop1, println);
	}
}

